(function(n){n.extend({tablesorter:new function(){function i(n,t){u(n+","+((new Date).getTime()-t.getTime())+"ms")}function u(n){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(n):alert(n)}function h(t,i){var o,e,r,f;if(t.config.debug&&(o=""),t.tBodies.length!=0){if(e=t.tBodies[0].rows,e[0]){var s=[],h=e[0].cells,l=h.length;for(r=0;r<l;r++)f=!1,n.metadata&&n(i[r]).metadata()&&n(i[r]).metadata().sorter?f=c(n(i[r]).metadata().sorter):t.config.headers[r]&&t.config.headers[r].sorter&&(f=c(t.config.headers[r].sorter)),f||(f=w(t,e,-1,r)),t.config.debug&&(o+="column:"+r+" parser:"+f.id+"\n"),s.push(f)}return t.config.debug&&u(o),s}}function w(n,i,r,f){for(var c=t.length,o=!1,s=!1,h=!0,e;s==""&&h;)r++,i[r]?(o=b(i,r,f),s=k(n.config,o),n.config.debug&&u("Checking if value was empty on row:"+r)):h=!1;for(e=1;e<c;e++)if(t[e].is(s,n,o))return t[e];return t[0]}function b(n,t,i){return n[t].cells[i]}function k(t,i){return n.trim(e(t,i))}function c(n){for(var r=t.length,i=0;i<r;i++)if(t[i].id.toLowerCase()==n.toLowerCase())return t[i];return!1}function l(t){var h,s,u,o,f;t.config.debug&&(h=new Date);var c=t.tBodies[0]&&t.tBodies[0].rows.length||0,l=t.tBodies[0].rows[0]&&t.tBodies[0].rows[0].cells.length||0,a=t.config.parsers,r={row:[],normalized:[]};for(s=0;s<c;++s){if(u=n(t.tBodies[0].rows[s]),o=[],u.hasClass(t.config.cssChildRow)){r.row[r.row.length-1]=r.row[r.row.length-1].add(u);continue}for(r.row.push(u),f=0;f<l;++f)o.push(a[f].format(e(t.config,u[0].cells[f]),t,u[0].cells[f]));o.push(r.normalized.length),r.normalized.push(o),o=null}return t.config.debug&&i("Building cache for "+c+" rows:",h),r}function e(t,i){return i?(t.supportsTextContent||(t.supportsTextContent=i.textContent||!1),t.textExtraction=="simple"?t.supportsTextContent?i.textContent:i.childNodes[0]&&i.childNodes[0].hasChildNodes()?i.childNodes[0].innerHTML:i.innerHTML:typeof t.textExtraction=="function"?t.textExtraction(i):n(i).text()):""}function o(t,r){var l,u,f,v,e;t.config.debug&&(l=new Date);var a=r,o=a.row,h=a.normalized,y=h.length,p=h[0].length-1,w=n(t.tBodies[0]),c=[];for(u=0;u<y;u++)if(f=h[u][p],c.push(o[f]),!t.config.appender)for(v=o[f].length,e=0;e<v;e++)w[0].appendChild(o[f][e]);t.config.appender&&t.config.appender(t,c),c=null,t.config.debug&&i("Rebuilt table:",l),s(t),setTimeout(function(){n(t).trigger("sortEnd")},0)}function d(t){var r,e,f;return t.config.debug&&(r=new Date),e=n.metadata?!0:!1,f=g(t),$tableHeaders=n(t.config.selectorHeaders,t).each(function(i){if(this.column=f[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=it(t.config.sortInitialOrder),this.count=this.order,(nt(this)||tt(t,i))&&(this.sortDisabled=!0),a(t,i)&&(this.order=this.lockedOrder=a(t,i)),!this.sortDisabled){var r=n(this).addClass(t.config.cssHeader);t.config.onRenderHeader&&t.config.onRenderHeader.apply(r)}t.config.headerList[i]=this}),t.config.debug&&(i("Built headers:",r),u($tableHeaders)),$tableHeaders}function g(n){for(var i=[],c={},v=n.getElementsByTagName("THEAD")[0],l=v.getElementsByTagName("TR"),h,f,t,a,s,u=0;u<l.length;u++)for(h=l[u].cells,f=0;f<h.length;f++){var e=h[f],r=e.parentNode.rowIndex,y=r+"-"+e.cellIndex,p=e.rowSpan||1,w=e.colSpan||1,o;for(typeof i[r]=="undefined"&&(i[r]=[]),t=0;t<i[r].length+1;t++)if(typeof i[r][t]=="undefined"){o=t;break}for(c[y]=o,t=r;t<r+p;t++)for(typeof i[t]=="undefined"&&(i[t]=[]),a=i[t],s=o;s<o+w;s++)a[s]="x"}return c}function nt(t){return n.metadata&&n(t).metadata().sorter===!1?!0:!1}function tt(n,t){return n.config.headers[t]&&n.config.headers[t].sorter===!1?!0:!1}function a(n,t){return n.config.headers[t]&&n.config.headers[t].lockedOrder?n.config.headers[t].lockedOrder:!1}function s(n){for(var i=n.config.widgets,r=i.length,t=0;t<r;t++)v(i[t]).format(n)}function v(n){for(var i=r.length,t=0;t<i;t++)if(r[t].id.toLowerCase()==n.toLowerCase())return r[t]}function it(n){return typeof n!="Number"?n.toLowerCase()=="desc"?1:0:n==1?1:0}function rt(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i][0]==n)return!0;return!1}function y(t,i,r,u){var e,o,f;for(i.removeClass(u[0]).removeClass(u[1]),e=[],i.each(function(){this.sortDisabled||(e[this.column]=n(this))}),o=r.length,f=0;f<o;f++)e[r[f][0]].addClass(u[r[f][1]])}function ut(t){var r=t.config,i;r.widthFixed&&(i=n("<colgroup>"),n("tr:first td",t.tBodies[0]).each(function(){i.append(n("<col>").css("width",n(this).width()))}),n(t).prepend(i))}function ft(n,t){for(var f=n.config,e=t.length,r,u,i=0;i<e;i++)r=t[i],u=f.headerList[r[0]],u.count=r[1],u.count++}function p(n,t,r){var a,u,s,l,e;for(n.config.debug&&(a=new Date),u="var sortWrapper = function(a,b) {",s=t.length,e=0;e<s;e++){var o=t[e][0],h=t[e][1],v=n.config.parsers[o].type=="text"?h==0?f("text","asc",o):f("text","desc",o):h==0?f("numeric","asc",o):f("numeric","desc",o),c="e"+e;u+="var "+c+" = "+v,u+="if("+c+") { return "+c+"; } ",u+="else { "}for(l=r.normalized[0].length-1,u+="return a["+l+"]-b["+l+"];",e=0;e<s;e++)u+="}; ";return u+="return 0; ",u+="}; ",n.config.debug&&i("Evaling expression:"+u,new Date),eval(u),r.normalized.sort(sortWrapper),n.config.debug&&i("Sorting on "+t.toString()+" and dir "+h+" time:",a),r}function f(n,t,i){var r="a["+i+"]",u="b["+i+"]";return n=="text"&&t=="asc"?"("+r+" == "+u+" ? 0 : ("+r+" === null ? Number.POSITIVE_INFINITY : ("+u+" === null ? Number.NEGATIVE_INFINITY : ("+r+" < "+u+") ? -1 : 1 )));":n=="text"&&t=="desc"?"("+r+" == "+u+" ? 0 : ("+r+" === null ? Number.POSITIVE_INFINITY : ("+u+" === null ? Number.NEGATIVE_INFINITY : ("+u+" < "+r+") ? -1 : 1 )));":n=="numeric"&&t=="asc"?"("+r+" === null && "+u+" === null) ? 0 :("+r+" === null ? Number.POSITIVE_INFINITY : ("+u+" === null ? Number.NEGATIVE_INFINITY : "+r+" - "+u+"));":n=="numeric"&&t=="desc"?"("+r+" === null && "+u+" === null) ? 0 :("+r+" === null ? Number.POSITIVE_INFINITY : ("+u+" === null ? Number.NEGATIVE_INFINITY : "+u+" - "+r+"));":void 0}var t=[],r=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=i,this.construct=function(t){return this.each(function(){var r,u,f,i,a,c;this.tHead&&this.tBodies&&(a=0,this.config={},i=n.extend(this.config,n.tablesorter.defaults,t),r=n(this),n.data(this,"tablesorter",i),u=d(this),this.config.parsers=h(this,u),f=l(this),c=[i.cssDesc,i.cssAsc],ut(this),u.click(function(t){var v=r[0].tBodies[0]&&r[0].tBodies[0].rows.length||0,w,s,l,e,h,a;if(!this.sortDisabled&&v>0){if(r.trigger("sortStart"),w=n(this),s=this.column,this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),t[i.sortMultiSortKey])if(rt(s,i.sortList))for(e=0;e<i.sortList.length;e++)h=i.sortList[e],a=i.headerList[h[0]],h[0]==s&&(a.count=h[1],a.count++,h[1]=a.count%2);else i.sortList.push([s,this.order]);else{if(i.sortList=[],i.sortForce!=null)for(l=i.sortForce,e=0;e<l.length;e++)l[e][0]!=s&&i.sortList.push(l[e]);i.sortList.push([s,this.order])}return setTimeout(function(){y(r[0],u,i.sortList,c),o(r[0],p(r[0],i.sortList,f))},1),!1}}).mousedown(function(){if(i.cancelSelection)return this.onselectstart=function(){return!1},!1}),r.bind("update",function(){var n=this;setTimeout(function(){n.config.parsers=h(n,u),f=l(n)},1)}).bind("updateCell",function(n,t){var r=this.config,i=[t.parentNode.rowIndex-1,t.cellIndex];f.normalized[i[0]][i[1]]=r.parsers[i[1]].format(e(r,t),t)}).bind("sorton",function(t,r){n(this).trigger("sortStart"),i.sortList=r;var e=i.sortList;ft(this,e),y(this,u,e,c),o(this,p(this,e,f))}).bind("appendCache",function(){o(this,f)}).bind("applyWidgetId",function(n,t){v(t).format(this)}).bind("applyWidgets",function(){s(this)}),n.metadata&&n(this).metadata()&&n(this).metadata().sortlist&&(i.sortList=n(this).metadata().sortlist),i.sortList.length>0&&r.trigger("sorton",[i.sortList]),s(this))})},this.addParser=function(n){for(var u=t.length,r=!0,i=0;i<u;i++)t[i].id.toLowerCase()==n.id.toLowerCase()&&(r=!1);r&&t.push(n)},this.addWidget=function(n){r.push(n)},this.formatFloat=function(n){var t=parseFloat(n);return isNaN(t)?0:t},this.formatInt=function(n){var t=parseInt(n);return isNaN(t)?0:t},this.isDigit=function(t){return/^[-+]?\d*$/.test(n.trim(t.replace(/[,.']/g,"")))},this.clearTableBody=function(t){if(n.browser.msie){function i(){while(this.firstChild)this.removeChild(this.firstChild)}i.apply(t.tBodies[0])}else t.tBodies[0].innerHTML=""}}}),n.fn.extend({tablesorter:n.tablesorter.construct});var t=n.tablesorter;t.addParser({id:"text",is:function(){return!0},format:function(t){return n.trim(t.toLocaleLowerCase())},type:"text"}),t.addParser({id:"digit",is:function(t,i){var r=i.config;return n.tablesorter.isDigit(t,r)},format:function(t){return n.tablesorter.formatFloat(t)},type:"numeric"}),t.addParser({id:"currency",is:function(n){return/^[£$€?.]/.test(n)},format:function(t){return n.tablesorter.formatFloat(t.replace(new RegExp(/[£$€]/g),""))},type:"numeric"}),t.addParser({id:"ipAddress",is:function(n){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(n)},format:function(t){for(var u=t.split("."),f="",e=u.length,r,i=0;i<e;i++)r=u[i],f+=r.length==2?"0"+r:r;return n.tablesorter.formatFloat(f)},type:"numeric"}),t.addParser({id:"url",is:function(n){return/^(https?|ftp|file):\/\/$/.test(n)},format:function(n){return jQuery.trim(n.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),t.addParser({id:"isoDate",is:function(n){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(n)},format:function(t){return n.tablesorter.formatFloat(t!=""?new Date(t.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),t.addParser({id:"percent",is:function(t){return/\%$/.test(n.trim(t))},format:function(t){return n.tablesorter.formatFloat(t.replace(new RegExp(/%/g),""))},type:"numeric"}),t.addParser({id:"usLongDate",is:function(n){return n.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(t){return n.tablesorter.formatFloat(new Date(t).getTime())},type:"numeric"}),t.addParser({id:"shortDate",is:function(n){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(n)},format:function(t,i){var r=i.config;return t=t.replace(/\-/g,"/"),r.dateFormat=="us"?t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):r.dateFormat=="uk"?t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):(r.dateFormat=="dd/mm/yy"||r.dateFormat=="dd-mm-yy")&&(t=t.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),n.tablesorter.formatFloat(new Date(t).getTime())},type:"numeric"}),t.addParser({id:"time",is:function(n){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(n)},format:function(t){return n.tablesorter.formatFloat(new Date("2000/01/01 "+t).getTime())},type:"numeric"}),t.addParser({id:"metadata",is:function(){return!1},format:function(t,i,r){var u=i.config,f=u.parserMetadataName?u.parserMetadataName:"sortValue";return n(r).metadata()[f]},type:"numeric"}),t.addWidget({id:"zebra",format:function(t){var f,i,r,u;t.config.debug&&(f=new Date),r=-1,n("tr:visible",t.tBodies[0]).each(function(){i=n(this),i.hasClass(t.config.cssChildRow)||r++,u=r%2==0,i.removeClass(t.config.widgetZebra.css[u?0:1]).addClass(t.config.widgetZebra.css[u?1:0])}),t.config.debug&&n.tablesorter.benchmark("Applying Zebra widget",f)}})})(jQuery);